{"ast":null,"code":"import axios from 'axios';\nimport { Line } from 'vue-chartjs';\nimport { Chart as ChartJS, Title, Tooltip, Legend, LineElement, CategoryScale, LinearScale, PointElement } from 'chart.js';\nChartJS.register(Title, Tooltip, Legend, LineElement, CategoryScale, LinearScale, PointElement);\nexport default {\n  components: {\n    LineChart: {\n      extends: Line,\n      props: ['chartData'],\n      mounted() {\n        this.renderChart(this.chartData, {\n          responsive: true,\n          maintainAspectRatio: false\n        });\n      }\n    }\n  },\n  data() {\n    return {\n      selectedType: 'TEMPERATURE',\n      startTime: '',\n      endTime: '',\n      sensorData: [],\n      chartData: {\n        labels: [],\n        datasets: [{\n          label: 'Sensor Data',\n          backgroundColor: '#f87979',\n          data: []\n        }]\n      }\n    };\n  },\n  methods: {\n    async fetchSensorData() {\n      try {\n        const response = await axios.get('http://localhost:8080/api/sensor-data/type/range', {\n          params: {\n            type: this.selectedType,\n            startTime: this.startTime ? new Date(this.startTime).toISOString() : null,\n            endTime: this.endTime ? new Date(this.endTime).toISOString() : null\n          }\n        });\n        this.sensorData = response.data;\n        this.updateChart();\n      } catch (error) {\n        console.error(error);\n      }\n    },\n    updateChart() {\n      const labels = this.sensorData.map(data => new Date(data.timestamp).toLocaleString());\n      const values = this.sensorData.map(data => data.value);\n      this.chartData.labels = labels;\n      this.chartData.datasets[0].data = values;\n    }\n  }\n};","map":{"version":3,"names":["axios","Line","Chart","ChartJS","Title","Tooltip","Legend","LineElement","CategoryScale","LinearScale","PointElement","register","components","LineChart","extends","props","mounted","renderChart","chartData","responsive","maintainAspectRatio","data","selectedType","startTime","endTime","sensorData","labels","datasets","label","backgroundColor","methods","fetchSensorData","response","get","params","type","Date","toISOString","updateChart","error","console","map","timestamp","toLocaleString","values","value"],"sources":["D:\\Vue\\sensor-dashboard\\src\\components\\SensorDataChart.vue"],"sourcesContent":["<template>\r\n    <div>\r\n      <h2>Sensor Data Chart</h2>\r\n      <div>\r\n        <label for=\"sensorType\">Sensor Type:</label>\r\n        <select id=\"sensorType\" v-model=\"selectedType\">\r\n          <option value=\"\">All</option>\r\n          <option value=\"TEMPERATURE\">Temperature</option>\r\n          <option value=\"HUMIDITY\">Humidity</option>\r\n          <option value=\"LIGHT_INTENSITY\">Light Intensity</option>\r\n        </select>\r\n  \r\n        <label for=\"startTime\">Start Time:</label>\r\n        <input type=\"datetime-local\" id=\"startTime\" v-model=\"startTime\">\r\n  \r\n        <label for=\"endTime\">End Time:</label>\r\n        <input type=\"datetime-local\" id=\"endTime\" v-model=\"endTime\">\r\n  \r\n        <button @click=\"fetchSensorData\">Fetch Data</button>\r\n      </div>\r\n      <line-chart v-if=\"chartData.datasets[0].data.length\" :chart-data=\"chartData\"></line-chart>\r\n      <p v-else>No data available</p>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import axios from 'axios';\r\n  import { Line } from 'vue-chartjs';\r\n  import {\r\n    Chart as ChartJS,\r\n    Title,\r\n    Tooltip,\r\n    Legend,\r\n    LineElement,\r\n    CategoryScale,\r\n    LinearScale,\r\n    PointElement\r\n  } from 'chart.js';\r\n  \r\n  ChartJS.register(Title, Tooltip, Legend, LineElement, CategoryScale, LinearScale, PointElement);\r\n  \r\n  export default {\r\n    components: {\r\n      LineChart: {\r\n        extends: Line,\r\n        props: ['chartData'],\r\n        mounted() {\r\n          this.renderChart(this.chartData, { responsive: true, maintainAspectRatio: false });\r\n        }\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        selectedType: 'TEMPERATURE',\r\n        startTime: '',\r\n        endTime: '',\r\n        sensorData: [],\r\n        chartData: {\r\n          labels: [],\r\n          datasets: [\r\n            {\r\n              label: 'Sensor Data',\r\n              backgroundColor: '#f87979',\r\n              data: []\r\n            }\r\n          ]\r\n        }\r\n      };\r\n    },\r\n    methods: {\r\n      async fetchSensorData() {\r\n        try {\r\n          const response = await axios.get('http://localhost:8080/api/sensor-data/type/range', {\r\n            params: {\r\n              type: this.selectedType,\r\n              startTime: this.startTime ? new Date(this.startTime).toISOString() : null,\r\n              endTime: this.endTime ? new Date(this.endTime).toISOString() : null\r\n            }\r\n          });\r\n          this.sensorData = response.data;\r\n          this.updateChart();\r\n        } catch (error) {\r\n          console.error(error);\r\n        }\r\n      },\r\n      updateChart() {\r\n        const labels = this.sensorData.map(data => new Date(data.timestamp).toLocaleString());\r\n        const values = this.sensorData.map(data => data.value);\r\n  \r\n        this.chartData.labels = labels;\r\n        this.chartData.datasets[0].data = values;\r\n      }\r\n    }\r\n  };\r\n  </script>\r\n  \r\n  <style scoped>\r\n  #sensorType, #startTime, #endTime {\r\n    margin: 0 10px;\r\n  }\r\n  </style>\r\n  "],"mappings":"AA0BE,OAAOA,KAAI,MAAO,OAAO;AACzB,SAASC,IAAG,QAAS,aAAa;AAClC,SACEC,KAAI,IAAKC,OAAO,EAChBC,KAAK,EACLC,OAAO,EACPC,MAAM,EACNC,WAAW,EACXC,aAAa,EACbC,WAAW,EACXC,YAAW,QACN,UAAU;AAEjBP,OAAO,CAACQ,QAAQ,CAACP,KAAK,EAAEC,OAAO,EAAEC,MAAM,EAAEC,WAAW,EAAEC,aAAa,EAAEC,WAAW,EAAEC,YAAY,CAAC;AAE/F,eAAe;EACbE,UAAU,EAAE;IACVC,SAAS,EAAE;MACTC,OAAO,EAAEb,IAAI;MACbc,KAAK,EAAE,CAAC,WAAW,CAAC;MACpBC,OAAOA,CAAA,EAAG;QACR,IAAI,CAACC,WAAW,CAAC,IAAI,CAACC,SAAS,EAAE;UAAEC,UAAU,EAAE,IAAI;UAAEC,mBAAmB,EAAE;QAAM,CAAC,CAAC;MACpF;IACF;EACF,CAAC;EACDC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,YAAY,EAAE,aAAa;MAC3BC,SAAS,EAAE,EAAE;MACbC,OAAO,EAAE,EAAE;MACXC,UAAU,EAAE,EAAE;MACdP,SAAS,EAAE;QACTQ,MAAM,EAAE,EAAE;QACVC,QAAQ,EAAE,CACR;UACEC,KAAK,EAAE,aAAa;UACpBC,eAAe,EAAE,SAAS;UAC1BR,IAAI,EAAE;QACR;MAEJ;IACF,CAAC;EACH,CAAC;EACDS,OAAO,EAAE;IACP,MAAMC,eAAeA,CAAA,EAAG;MACtB,IAAI;QACF,MAAMC,QAAO,GAAI,MAAMhC,KAAK,CAACiC,GAAG,CAAC,kDAAkD,EAAE;UACnFC,MAAM,EAAE;YACNC,IAAI,EAAE,IAAI,CAACb,YAAY;YACvBC,SAAS,EAAE,IAAI,CAACA,SAAQ,GAAI,IAAIa,IAAI,CAAC,IAAI,CAACb,SAAS,CAAC,CAACc,WAAW,CAAC,IAAI,IAAI;YACzEb,OAAO,EAAE,IAAI,CAACA,OAAM,GAAI,IAAIY,IAAI,CAAC,IAAI,CAACZ,OAAO,CAAC,CAACa,WAAW,CAAC,IAAI;UACjE;QACF,CAAC,CAAC;QACF,IAAI,CAACZ,UAAS,GAAIO,QAAQ,CAACX,IAAI;QAC/B,IAAI,CAACiB,WAAW,CAAC,CAAC;MACpB,EAAE,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;MACtB;IACF,CAAC;IACDD,WAAWA,CAAA,EAAG;MACZ,MAAMZ,MAAK,GAAI,IAAI,CAACD,UAAU,CAACgB,GAAG,CAACpB,IAAG,IAAK,IAAIe,IAAI,CAACf,IAAI,CAACqB,SAAS,CAAC,CAACC,cAAc,CAAC,CAAC,CAAC;MACrF,MAAMC,MAAK,GAAI,IAAI,CAACnB,UAAU,CAACgB,GAAG,CAACpB,IAAG,IAAKA,IAAI,CAACwB,KAAK,CAAC;MAEtD,IAAI,CAAC3B,SAAS,CAACQ,MAAK,GAAIA,MAAM;MAC9B,IAAI,CAACR,SAAS,CAACS,QAAQ,CAAC,CAAC,CAAC,CAACN,IAAG,GAAIuB,MAAM;IAC1C;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}