{"ast":null,"code":"import axios from 'axios';\nimport { Line } from 'vue-chartjs';\nimport { Chart as ChartJS, Tooltip, Legend, LineElement, CategoryScale, LinearScale, PointElement, registerables } from 'chart.js';\nChartJS.register(...registerables);\nexport default {\n  components: {\n    LineChart: {\n      extends: Line,\n      props: ['chartData', 'options'],\n      mounted() {\n        this.renderChart(this.chartData, this.options);\n      }\n    }\n  },\n  data() {\n    return {\n      selectedType: 'TEMPERATURE',\n      startTime: '',\n      endTime: '',\n      sensorData: [],\n      chartData: {\n        labels: [],\n        datasets: [{\n          label: 'Sensor Data',\n          backgroundColor: '#f87979',\n          data: []\n        }]\n      },\n      chartOptions: {\n        responsive: true,\n        maintainAspectRatio: false\n      }\n    };\n  },\n  methods: {\n    async fetchSensorData() {\n      try {\n        const response = await axios.get('http://localhost:8080/api/sensor-data/type/range', {\n          params: {\n            type: this.selectedType,\n            startTime: this.startTime ? new Date(this.startTime).toISOString() : null,\n            endTime: this.endTime ? new Date(this.endTime).toISOString() : null\n          }\n        });\n        this.sensorData = response.data;\n        this.updateChart();\n      } catch (error) {\n        console.error(error);\n      }\n    },\n    updateChart() {\n      const labels = this.sensorData.map(data => new Date(data.timestamp).toLocaleString());\n      const values = this.sensorData.map(data => data.value);\n      this.chartData.labels = labels;\n      this.chartData.datasets[0].data = values;\n    }\n  }\n};","map":{"version":3,"names":["axios","Line","Chart","ChartJS","Tooltip","Legend","LineElement","CategoryScale","LinearScale","PointElement","registerables","register","components","LineChart","extends","props","mounted","renderChart","chartData","options","data","selectedType","startTime","endTime","sensorData","labels","datasets","label","backgroundColor","chartOptions","responsive","maintainAspectRatio","methods","fetchSensorData","response","get","params","type","Date","toISOString","updateChart","error","console","map","timestamp","toLocaleString","values","value"],"sources":["D:\\Vue\\sensor-dashboard\\src\\components\\SensorDataChart.vue"],"sourcesContent":["<template>\r\n    <div>\r\n      <h2>Sensor Data Chart</h2>\r\n      <div>\r\n        <label for=\"sensorType\">Sensor Type:</label>\r\n        <select id=\"sensorType\" v-model=\"selectedType\">\r\n          <option value=\"\">All</option>\r\n          <option value=\"TEMPERATURE\">Temperature</option>\r\n          <option value=\"HUMIDITY\">Humidity</option>\r\n          <option value=\"LIGHT_INTENSITY\">Light Intensity</option>\r\n        </select>\r\n  \r\n        <label for=\"startTime\">Start Time:</label>\r\n        <input type=\"datetime-local\" id=\"startTime\" v-model=\"startTime\">\r\n  \r\n        <label for=\"endTime\">End Time:</label>\r\n        <input type=\"datetime-local\" id=\"endTime\" v-model=\"endTime\">\r\n  \r\n        <button @click=\"fetchSensorData\">Fetch Data</button>\r\n      </div>\r\n      <line-chart v-if=\"chartData.labels.length\" :chart-data=\"chartData\" :options=\"chartOptions\"></line-chart>\r\n      <p v-else>No data available</p>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import axios from 'axios';\r\n  import { Line } from 'vue-chartjs';\r\n  import {\r\n    Chart as ChartJS,\r\n    Tooltip,\r\n    Legend,\r\n    LineElement,\r\n    CategoryScale,\r\n    LinearScale,\r\n    PointElement,\r\n    registerables\r\n  } from 'chart.js';\r\n  \r\n  ChartJS.register(...registerables);\r\n  \r\n  export default {\r\n    components: {\r\n      LineChart: {\r\n        extends: Line,\r\n        props: ['chartData', 'options'],\r\n        mounted() {\r\n          this.renderChart(this.chartData, this.options);\r\n        }\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        selectedType: 'TEMPERATURE',\r\n        startTime: '',\r\n        endTime: '',\r\n        sensorData: [],\r\n        chartData: {\r\n          labels: [],\r\n          datasets: [\r\n            {\r\n              label: 'Sensor Data',\r\n              backgroundColor: '#f87979',\r\n              data: []\r\n            }\r\n          ]\r\n        },\r\n        chartOptions: {\r\n          responsive: true,\r\n          maintainAspectRatio: false\r\n        }\r\n      };\r\n    },\r\n    methods: {\r\n      async fetchSensorData() {\r\n        try {\r\n          const response = await axios.get('http://localhost:8080/api/sensor-data/type/range', {\r\n            params: {\r\n              type: this.selectedType,\r\n              startTime: this.startTime ? new Date(this.startTime).toISOString() : null,\r\n              endTime: this.endTime ? new Date(this.endTime).toISOString() : null\r\n            }\r\n          });\r\n          this.sensorData = response.data;\r\n          this.updateChart();\r\n        } catch (error) {\r\n          console.error(error);\r\n        }\r\n      },\r\n      updateChart() {\r\n        const labels = this.sensorData.map(data => new Date(data.timestamp).toLocaleString());\r\n        const values = this.sensorData.map(data => data.value);\r\n  \r\n        this.chartData.labels = labels;\r\n        this.chartData.datasets[0].data = values;\r\n      }\r\n    }\r\n  };\r\n  </script>\r\n  \r\n  <style scoped>\r\n  #sensorType, #startTime, #endTime {\r\n    margin: 0 10px;\r\n  }\r\n  </style>\r\n  "],"mappings":"AA0BE,OAAOA,KAAI,MAAO,OAAO;AACzB,SAASC,IAAG,QAAS,aAAa;AAClC,SACEC,KAAI,IAAKC,OAAO,EAChBC,OAAO,EACPC,MAAM,EACNC,WAAW,EACXC,aAAa,EACbC,WAAW,EACXC,YAAY,EACZC,aAAY,QACP,UAAU;AAEjBP,OAAO,CAACQ,QAAQ,CAAC,GAAGD,aAAa,CAAC;AAElC,eAAe;EACbE,UAAU,EAAE;IACVC,SAAS,EAAE;MACTC,OAAO,EAAEb,IAAI;MACbc,KAAK,EAAE,CAAC,WAAW,EAAE,SAAS,CAAC;MAC/BC,OAAOA,CAAA,EAAG;QACR,IAAI,CAACC,WAAW,CAAC,IAAI,CAACC,SAAS,EAAE,IAAI,CAACC,OAAO,CAAC;MAChD;IACF;EACF,CAAC;EACDC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,YAAY,EAAE,aAAa;MAC3BC,SAAS,EAAE,EAAE;MACbC,OAAO,EAAE,EAAE;MACXC,UAAU,EAAE,EAAE;MACdN,SAAS,EAAE;QACTO,MAAM,EAAE,EAAE;QACVC,QAAQ,EAAE,CACR;UACEC,KAAK,EAAE,aAAa;UACpBC,eAAe,EAAE,SAAS;UAC1BR,IAAI,EAAE;QACR;MAEJ,CAAC;MACDS,YAAY,EAAE;QACZC,UAAU,EAAE,IAAI;QAChBC,mBAAmB,EAAE;MACvB;IACF,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IACP,MAAMC,eAAeA,CAAA,EAAG;MACtB,IAAI;QACF,MAAMC,QAAO,GAAI,MAAMlC,KAAK,CAACmC,GAAG,CAAC,kDAAkD,EAAE;UACnFC,MAAM,EAAE;YACNC,IAAI,EAAE,IAAI,CAAChB,YAAY;YACvBC,SAAS,EAAE,IAAI,CAACA,SAAQ,GAAI,IAAIgB,IAAI,CAAC,IAAI,CAAChB,SAAS,CAAC,CAACiB,WAAW,CAAC,IAAI,IAAI;YACzEhB,OAAO,EAAE,IAAI,CAACA,OAAM,GAAI,IAAIe,IAAI,CAAC,IAAI,CAACf,OAAO,CAAC,CAACgB,WAAW,CAAC,IAAI;UACjE;QACF,CAAC,CAAC;QACF,IAAI,CAACf,UAAS,GAAIU,QAAQ,CAACd,IAAI;QAC/B,IAAI,CAACoB,WAAW,CAAC,CAAC;MACpB,EAAE,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;MACtB;IACF,CAAC;IACDD,WAAWA,CAAA,EAAG;MACZ,MAAMf,MAAK,GAAI,IAAI,CAACD,UAAU,CAACmB,GAAG,CAACvB,IAAG,IAAK,IAAIkB,IAAI,CAAClB,IAAI,CAACwB,SAAS,CAAC,CAACC,cAAc,CAAC,CAAC,CAAC;MACrF,MAAMC,MAAK,GAAI,IAAI,CAACtB,UAAU,CAACmB,GAAG,CAACvB,IAAG,IAAKA,IAAI,CAAC2B,KAAK,CAAC;MAEtD,IAAI,CAAC7B,SAAS,CAACO,MAAK,GAAIA,MAAM;MAC9B,IAAI,CAACP,SAAS,CAACQ,QAAQ,CAAC,CAAC,CAAC,CAACN,IAAG,GAAI0B,MAAM;IAC1C;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}